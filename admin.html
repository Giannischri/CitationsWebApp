<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Create &mdash; Onepage Website Template by Colorlib</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		
		<link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700,900" rel="stylesheet">
		<link rel="stylesheet" href="fonts/icomoon/style.css">
		
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/jquery-ui.css">
		<link rel="stylesheet" href="css/owl.carousel.min.css">
		<link rel="stylesheet" href="css/owl.theme.default.min.css">
		<link rel="stylesheet" href="css/owl.theme.default.min.css">
		
		<link rel="stylesheet" href="css/jquery.fancybox.min.css">
		
		<link rel="stylesheet" href="css/bootstrap-datepicker.css">
		
		<link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">
		
		<link rel="stylesheet" href="css/aos.css">
		
		<link rel="stylesheet" href="css/style.css">
		
	</head>
	<body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
		
		<div class="site-wrap">
			
			<div class="site-mobile-menu site-navbar-target">
				<div class="site-mobile-menu-header">
					<div class="site-mobile-menu-close mt-3">
						<span class="icon-close2 js-menu-toggle"></span>
					</div>
				</div>
				<div class="site-mobile-menu-body"></div>
			</div>
			
			<div class="border-bottom top-bar py-2 bg-dark" id="home-section">
				<div class="container">
					<div class="row">
					  <div class="col-md-6">
						<p class="mb-0">
						  <span class="mr-3">
							<span><strong id="usernamelbl" style="color:rgb(0, 252, 239)" style="display:none">Username:</strong> <label style="color:red"   id="usernameglbl"></label></span>
							<span><strong id="rolelbl" style="color:rgb(0, 252, 239)" style="display:none;">Role:</strong> <label style="color:red" id="roleglbl"></label></span>
							<span><button id="logout" class="btn btn-outline-danger" style="display:none;" onclick="logout()">Logout</button></span>
						</p>
					  </div>
					  <div class="col-md-6">
						<div class="form-popup" id="loginform" style="display:none">
						  <form action="login.php" method="POST" class="form-container" >
							<h1 style="color:red">Login</h1>
							<label for="email"><b style="color:red">Email</b></label>
							<input type="text" placeholder="Enter Email" name="email" required>
						
							<label for="psw"><b style="color:red">Password</b></label>
							<input type="password" placeholder="Enter Password" name="psw" required>
						  
						   
						  
						
							<button type="submit" name="logsub" class="btn btn-outline-primary">Login</button>
							<button type="button"  class="btn btn-outline-danger" onclick="closeForm()">Close</button>
						  </form>
						</div>
						<ul class="social-media">
						  <li><a href="#" class="p-2"><span class="icon-facebook"></span></a></li>
						  <li><a href="#" class="p-2"><span class="icon-twitter"></span></a></li>
						  <li><a href="#" class="p-2"><span class="icon-instagram"></span></a></li>
						  <li><a href="#" class="p-2"><span class="icon-linkedin"></span></a></li>
						</ul>
					  </div>
					</div>
				  </div> 
			</div>
			
			<header class="site-navbar py-4 bg-white js-sticky-header site-navbar-target" role="banner">
				
				<div class="container">
					<div class="row align-items-center">
						
						
						
						
						<img src="images/logo.png" />
						<h1 class="mb-0 site-logo"><a href="index.html" class="text-black h2 mb-0">Icsd-Postmaker<span class="text-primary">.</span> </a></h1>
						
						
						
						
						<div class="col-12">
							<nav class="site-navigation position-relative text-right" role="navigation">
								
								<ul id="toplis" class="site-menu main-menu js-clone-nav mr-auto d-none d-lg-block">
									<li><a href="index.html" class="nav-link" style="color:rgb(0, 252, 239)">Home</a></li>
								   
									
									<li><a href="postan.html" style="color:rgb(0, 252, 239)">Post annaouncement</a></li>
									<li id="profilebtn" style="display:none"><a href="profile.html" style="color:rgb(0, 252, 239)" class="nav-link">Profile</a></li>
									<li>
									  <a href="stats.html" style="color:rgb(0, 252, 239)" class="nav-link">Statistics</a>
									</li>
									<li id="adminbtn"><a href="admin.html" style="color:red" class="nav-link">Admin</a></li>
									<li id="loginbtn"><a href="javascript:openForm();" style="color:red" class="nav-link">Login</a></li>
									<li  id="signupbtn"><a href="signup.html" style="color:red" class="nav-link">Sign up</a></li>
								  </ul>
										
							</nav>
						</div>
						
						
						<div class="d-inline-block d-xl-none ml-md-0 mr-auto py-3" style="position: relative; top: 3px;"><a href="#" class="site-menu-toggle js-menu-toggle text-black"><span class="icon-menu h3"></span></a></div>
						
					</div>
				</div>
				
				
			</header>
			<div class="site-blocks-cover overlay" style="background-image: url(images/hero_1.jpg);" data-aos="fade"
			data-stellar-background-ratio="0.5">
				<div class="container">
					<div class="row align-items-center justify-content-center text-center">
						
						
					</div>
				</div>
			</div>
			
			
			
			
			
			
			
			<section class="site-section">
				<div class="row" id="stats1" style="margin-left:10px;">
					<ul class="list-unstyled" style="margin-left:100px;">
						<li>
							<form action="index.html" method="post" class="form-inline p-3" id="add">
								<label class="font-weight-bold">
									Create User
								</label>
								<button type="button" class="btn btn-primary btn-md" style="margin-left:50px;" onclick="addFunc()">
									Add User
								</button>
							</form>
						</li>
						<li style="display:none;" id="add-table">
							<table style="width:100%">
								<tr>
									<th>
										Username
									</th>
									<th>
										Password
									</th>
									<th>
										Role
									</th>
								</tr>
								<tr>
									<td>
										<input type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="basic-addon2" style="width:100%;" id="add-username">
									</td>
									<td>
										<input type="text" class="form-control" placeholder="Password" aria-label="Password" aria-describedby="basic-addon2" style="width:100%;" id="add-password">
									</td>
									<td>
										<input type="text" class="form-control" placeholder="Role" aria-label="Role" aria-describedby="basic-addon2" style="width:100%;" id="add-role">
									</td>
									<td>
										<button type="button" class="btn btn-primary btn-md font-weight-bold" id="submit-add-user">
											Submit
										</button>
									</td>
								</tr>
							</table>
						</li>
						<li>
							<form action="index.html" method="post" class="form-inline p-3" id="modify">
								<label class="font-weight-bold">
									Modify User
								</label>
								<button type="button" class="btn btn-primary btn-md" style="margin-left:40px;" onclick="modifyFunc()">
									Modify User
								</button>
							</form>
						</li>
						<li class="sub">
							<div class="container">
								<table class="table table-responsive" id="userTable"  style="display:none;" border="1" >
									<thead>
										<tr>
											<th>Number</th>
											<th>Username</th>
											<th>Password</th>
											<th>Role</th>
										</tr>
									</thead>
									<tbody>
										
									</tbody>
								</table>
							</div>
							<div class="container">
								<button type="button" class="btn btn-primary btn-md" style=" display:none;" id="modifysubmit" >
									Submit
								</button>
							</div>
						</li>
						<li>
							<form action="index.html" method="post" class="form-inline p-3" id="delete">
								<label class="font-weight-bold">
									Delete User
								</label>
								<button type="button" class="btn btn-primary btn-md" style="margin-left:40px;" onclick="deleteFunc()">
									Delete User
								</button>
							</form>
						</li>
						<li style="display:none;" id="delete-table">
							<table style="width:100%">
								<tr>
									<th>
										Username
									</th>
								</tr>
								<tr>
									<td>
										<input type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="basic-addon2" style="width:100%;" id="delete-username">
									</td>
									<td>
										<button type="button" class="btn btn-primary btn-md font-weight-bold" id="submit-delete-user">
											Submit
										</button>
									</td>
								</tr>
							</table>
						</li>
					</ul>
					<ul class="list-unstyled">
						<li style="margin-left:500px;">
							<div class="container">
								<table class="table table-responsive" id="userTable2"  style="display:none;" border="1" >
									<thead>
										<tr>
											<th>Number</th>
											<th>Username</th>
											<th>name</th>
											<th>surname</th>
											<th>orcidurl</th>
											<th>url</th>
										</tr>
									</thead>
									<tbody>
										
									</tbody>
								</table>
							</div>
						</li>
						<li>
							<div class="container">
								<button type="button" class="btn btn-primary btn-md" style=" display:none; margin-left:500px;" id="modifysubmit2">
									Submit
								</button>
							</div>
						</li>	
					</ul>
					
					
					
					
				</div>
				
				
			</section>
			
			
			
			
			
			<footer class="site-footer">
				<div class="container">
					<div class="row">
						<div class="col-md-9">
							<div class="row">
								<div class="col-md-5">
									<h2 class="footer-heading mb-4">About Us</h2>
									<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Neque facere laudantium magnam voluptatum autem. Amet aliquid nesciunt veritatis aliquam.</p>
								</div>
								<div class="col-md-3 ml-auto">
									<h2 class="footer-heading mb-4">Features</h2>
									<ul class="list-unstyled">
										<li><a href="#">About Us</a></li>
										<li><a href="#">Services</a></li>
										<li><a href="#">Testimonials</a></li>
										<li><a href="#">Contact Us</a></li>
									</ul>
								</div>
								<div class="col-md-3">
									<h2 class="footer-heading mb-4">Follow Us</h2>
									<a href="#" class="pl-0 pr-3"><span class="icon-facebook"></span></a>
									<a href="#" class="pl-3 pr-3"><span class="icon-twitter"></span></a>
									<a href="#" class="pl-3 pr-3"><span class="icon-instagram"></span></a>
									<a href="#" class="pl-3 pr-3"><span class="icon-linkedin"></span></a>
								</div>
							</div>
						</div>
						<div class="col-md-3">
							<h2 class="footer-heading mb-4">Subscribe Newsletter</h2>
							<form action="#" method="post">
								<div class="input-group mb-3">
									<input type="text" class="form-control border-secondary text-white bg-transparent" placeholder="Enter Email" aria-label="Enter Email" aria-describedby="button-addon2">
									<div class="input-group-append">
										<button class="btn btn-primary text-white" type="button" id="button-addon2">Send</button>
									</div>
								</div>
							</form>
						</div>
					</div>
					<div class="row pt-5 mt-5 text-center">
						<div class="col-md-12">
							<div class="border-top pt-5">
								<p>
									<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
									Copyright &copy;
									<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart text-danger" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
									<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								</p>
							</div>
						</div>
						
					</div>
				</div>
			</footer>
			
		</div> <!-- .site-wrap -->
		
		<script src="js/jquery-3.3.1.min.js"></script>
		<script src="js/jquery-migrate-3.0.1.min.js"></script>
		<script src="js/jquery-ui.js"></script>
		<script src="js/popper.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/owl.carousel.min.js"></script>
		<script src="js/jquery.stellar.min.js"></script>
		<script src="js/jquery.countdown.min.js"></script>
		<script src="js/bootstrap-datepicker.min.js"></script>
		<script src="js/jquery.easing.1.3.js"></script>
		<script src="js/aos.js"></script>
		<script src="js/jquery.fancybox.min.js"></script>
		<script src="js/jquery.sticky.js"></script>
		<script language="JavaScript" type="text/javascript">
		
			function openForm() {
				document.getElementById("loginform").style.display = "block";
			}
			
			function closeForm() {
				document.getElementById("loginform").style.display = "none";
			}
			function logout() {
				$.ajax({
					url: "functions.php",
					type: 'post',
					data: { "logout": "1" },
					success: function () {
						alert("You logged out");
						location.reload();
					}
				});
				
				
			}

			function printstats(data) {
				var numposts = "";
				var date = "";
				var pubstrings = "";
				var yearly = "";
				alert("printstart");
				numofposts = '<h5>Number of Posts:</h5>' +
				'<ul>' +
				'<li>Totally:' + data.totalposts + '</li>' +
				'<li>Based on type:' +
				'<ul>' +
				'<li>Articles:' + data.articleposts + '</li>' +
				'<li>Inproceedings:' + data.inprocposts + '</li>' +
				'<li>Books:' + data.bookposts + '</li>' +
				'<li>Inbooks:' + data.inbookposts + '</li>' +
				'</ul>' +
				'</li>' +
				'</ul>';
				
				yearly = '<h6>Year:' + data.yearposts[0] + '/Posts:' + data.yearposts[1] + '<h6>';
				
				dates = '<h5>Dates From-To:</h5>' +
				'<ul>' +
				'<li>Posts:' + data.mindateposts + '-' + data.maxdateposts + '</li>' +
				'<li>Articles:' + data.mindatearticles + '-' + data.maxdatearticles + '</li>' +
				'<li>Inproceedings:' + data.mindateinproc + '-' + data.maxdateinproc + '</li>' +
				'<li>Books:' + data.mindatebooks + '-' + data.maxdatebooks + '</li>' +
				'<li>Inbooks:' + data.mindateinbooks + '-' + data.maxdateinbooks + '</li>' +
				'</ul>';
				
				for (var i = 0; i < data.publishers.length; i++) {
					pubstrings += '<li>Publisher Name:' + data.publishers[i].name + '</li>' +
					'<h6>Publisher Posts:' + data.publishers[i].postsnum + '</h6>';
				}
				alert("xaaxxaax");
				console.log(numofposts);
				var stats1 = document.getElementById('stats1').innerHTML = "<div class='col'>" + numofposts + "</div><div class='col'>" +
				"<h5>Yearly posts</h5>" + yearly + "</div><div class='col'>" + dates + "</div><div class='col'><h5>Publishers:</h5>" + pubstrings + "</div>";
				
				
				
			}
			
		</script>
		
		
		<script src="js/main.js"></script>
		<script>
			$(document).ready(function () {
			$.ajax({
			url: "functions.php",
			type: 'post',
			dataType: 'json',
			data: { "calluser": "1" },
			success: function (data) {
			if (data !== "") {
			$('#usernameglbl').html(data.name);
			$('#roleglbl').html(data.role);
			$('#logout').show();
			
			
			}
			}
			});
			});
			$(document).ready(function () {
			$.ajax({
			url: "kfunctions.php",
			type: 'post',
			dataType: 'json',
			data: { "stats": "1" },
			success: function (data) {
			alert("endajax");
			//alert(data);
			printstats(data);
			}
			});
			});
		</script>
		<script>
			$(document).ready(function () {
				$("#admin").hide()
			});
		</script>
		<script>
			function addFunc() {
				//swsto mhn to allaksw
				$("#modify").hide();
				$("#delete").hide();
				$("#add").hide();
				$("#add-table").show();
				$("#submit-add-user").click(function () {
					//alert("add user button clicked");
					var username = $('#add-username').val();
					var password = $('#add-password').val();
					var role = $('#add-role').val();
					//alert(username);
					$.ajax({
						url: "kfunctions.php",
						method: 'post',
						dataType: 'json',
						data: { "admin-add": '1', "username": username, "password": password, "role": role },
						success: function (data) {
							alert("row with name : '"+data+"'  added successfully");
							window.location.reload();
						}
					});
				});
			}
			function modifyFunc(){
				var modified=[];
				$("#modify").hide();
				$("#delete").hide();
				$("#add").hide();
				$("#userTable").show();
				$("#userTable2").show();
				$("#modifysubmit").show();
				$("#modifysubmit2").show();
				alert("ok at start");
				$.ajax({ url: "kfunctions.php",
					method:'post',
					dataType: 'json',
					data: { "admin-modify": "1"},
					success: function(data){
						var len = data.length;
						//alert("shit");
						for(var i=0; i<len; i++){
							modified.push(data[i].username);
							modified.push(data[i].password);
							modified.push(data[i].role);
						var tr_str = "<tr>" +
						"<td align='center'>" + (i+1) + "</td>" +
						"<td align='center' contenteditable='true'>" + data[i].username + "</td>" +
						"<td align='center' contenteditable='true'>" + data[i].password + "</td>" +
						"<td align='center' contenteditable='true'>" + data[i].role + "</td>" +
						"</tr>";
						
						$("#userTable tbody").append(tr_str);
						}
						//modified.length=0;
						}
						
						});
						
						$("#modifysubmit").click(function(){
						//pernei palia values
						//modified.push(document.getElementById('username'));
						addnewinfo(modified);
						});
						
						$.ajax({ url: "kfunctions.php",
						method:'post',
						dataType: 'json',
						data: { "admin-modify-author": "1"},
						success: function(data){
						var len = data.length;
						for(var i=0; i<len; i++){
						var tr_str = "<tr>" +
						"<td align='center'>" + (i+1) + "</td>" +
						"<td align='center' contenteditable='true'>" + data[i].username + "</td>" +
						"<td align='center' contenteditable='true'>" + data[i].name + "</td>" +
						"<td align='center' contenteditable='true'>" + data[i].orcidurl + "</td>" +"<td align='center' contenteditable='true'>" + data[i].url + "</td>"+"<td align='center' contenteditable='true'>" + data[i].speacialty + "</td>"+
						"</tr>";
						
						$("#userTable2 tbody").append(tr_str);
						}
						
						}
						
						});
						}	
						function deleteFunc() {
						//swsto mhn to allaksw
						$("#modify").hide();
						$("#delete").hide();
						$("#add").hide();
						$("#delete-table").show();
						$("#submit-delete-user").click(function () {
						//alert("delete user button clicked");
						var username = $('#delete-username').val();
						//alert(username);
						$.ajax({
						url: "kfunctions.php",
						method: 'post',
						dataType: 'json',
						data: { "admin-delete": "1", "username": username },
						success: function (data) {
							alert("row with name : '"+data+"'  deleted successfully");
							window.location.reload();
						}
					});
				});
			}
			
			function addnewinfo(obj){
				//alert("fk me ");
				alert(obj);
				$.ajax({
					url: "kfunctions.php",
					method: 'post',
					dataType: 'json',
					data: {"admin-modify-last":"1","object":obj},
					success: function (data) {
						//alert(data);
						window.location.reload();
						alert("table columns changed");
					}
				});
			}
			$(document).ready(function(){
      $.ajax({ url: "functions.php",
              type:'post',
              dataType: 'json',
              data: { "calluser": "1"},
              success: function(data){
                if(data!==""){
                  $('#username').html(data.name);
                $('#role').html(data.role);                
                $('#logout').show();
               // document.getElementById('signbtn').style.display="none";
                //console.log(document.getElementById('signbtn')) ;
                }
              }});
      });
		</script>
		
	</body>
</html>						